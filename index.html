<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>IndiWander | Explore the World</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at top, #020617, #000000);
  color: white;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.wrapper { text-align: center; }

#globeCanvas, #map {
  width: 300px;
  height: 300px;
  margin: 0 auto;
}

#map {
  display: none;
  border-radius: 50%;
  overflow: hidden;
}

.search-box {
  margin-top: 2rem;
  opacity: 0;
  transform: translateY(20px);
  transition: 0.6s;
  pointer-events: none;
}

.search-box.active {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

input {
  width: 280px;
  padding: 0.8rem 1.2rem;
  border-radius: 30px;
  border: none;
  outline: none;
}

.suggestions {
  margin-top: 0.6rem;
  display: flex;
  gap: 0.5rem;
  justify-content: center;
  flex-wrap: wrap;
}

.suggestions span {
  background: #1e293b;
  padding: 0.4rem 0.8rem;
  border-radius: 20px;
  cursor: pointer;
  font-size: 0.8rem;
}

button {
  margin-top: 1.2rem;
  padding: 0.6rem 1.8rem;
  border-radius: 30px;
  border: none;
  background: #38bdf8;
  cursor: pointer;
}

audio { display: none; }
</style>
</head>

<body>

<div class="wrapper">
  <h1>Where do you want to go?</h1>
  <p>Click the globe to begin</p>

  <div id="globeCanvas"></div>
  <div id="map"></div>

  <div class="search-box" id="searchBox">
    <input id="destination" placeholder="Search destination..." />

    <div class="suggestions">
      <span onclick="pick('goa')">Goa</span>
      <span onclick="pick('rajasthan')">Rajasthan</span>
      <span onclick="pick('bali')">Bali</span>
      <span onclick="pick('paris')">Paris</span>
      <span onclick="pick('tokyo')">Tokyo</span>
    </div>

    <button onclick="search()">Show Itinerary</button>
  </div>
</div>

<audio id="spinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-small-sweep-transition-166.wav"></audio>

<script>
/* ===== THREE.JS GLOBE ===== */
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(45, 1, 0.1, 1000);

const renderer = new THREE.WebGLRenderer({
  antialias: true,
  powerPreference: "high-performance"
});
renderer.setSize(300, 300);
renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
renderer.setClearColor(0x000000, 1);

document.getElementById("globeCanvas").appendChild(renderer.domElement);

const globe = new THREE.Mesh(
  new THREE.SphereGeometry(5, 64, 64),
  new THREE.MeshStandardMaterial({
    map: new THREE.TextureLoader().load(
      "https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg"
    ),
    roughness: 0.35,
    metalness: 0.05
  })
);
scene.add(globe);

scene.add(new THREE.AmbientLight(0x404040, 1.4));

const light = new THREE.PointLight(0xffffff, 1.6);
light.position.set(10, 10, 10);
scene.add(light);

/* India Marker */
const marker = new THREE.Mesh(
  new THREE.SphereGeometry(0.15, 16, 16),
  new THREE.MeshBasicMaterial({ color: 0xff9933 })
);
marker.position.set(1.1, 2.4, -3.8);
scene.add(marker);

camera.position.z = 15;

let spinning = false;
let zooming = false;

function animate() {
  requestAnimationFrame(animate);
  if (spinning) globe.rotation.y += 0.004;
  if (zooming && camera.position.z > 11) camera.position.z -= 0.03;
  renderer.render(scene, camera);
}
animate();

/* Interaction */
document.getElementById("globeCanvas").addEventListener("click", () => {
  spinning = true;
  zooming = true;
  document.getElementById("searchBox").classList.add("active");
  document.getElementById("spinSound").play();
});

/* Search & Map */
function pick(place) {
  document.getElementById("destination").value = place;
}

function search() {
  const val = destination.value.toLowerCase().trim();
  if (!val) return alert("Enter destination");

  globeCanvas.style.display = "none";
  map.style.display = "block";

  const locations = {
    goa: [15.2993, 74.124],
    rajasthan: [27.0238, 74.2179],
    bali: [-8.3405, 115.092],
    paris: [48.8566, 2.3522],
    tokyo: [35.6762, 139.6503]
  };

  const coords = locations[val];
  if (!coords) return alert("Location not mapped yet");

  const leafletMap = L.map("map").setView(coords, 6);
  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(leafletMap);
  L.marker(coords).addTo(leafletMap).bindPopup(val.toUpperCase()).openPopup();
}
</script>

</body>
</html>
