<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>IndiWander | Explore the World</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
<script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>

<style>
* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Poppins', sans-serif;
  background: radial-gradient(circle at top, #020617, #000);
  color: white;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.wrapper {
  text-align: center;
  z-index: 2;
}

h1 {
  font-size: 2.4rem;
  margin-bottom: 0.5rem;
}

p {
  color: #94a3b8;
  margin-bottom: 2rem;
}

#globeContainer {
  width: 320px;
  height: 320px;
  margin: auto;
  cursor: pointer;
}

.search-box {
  margin-top: 2rem;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.5s ease;
  pointer-events: none;
}

.search-box.active {
  opacity: 1;
  transform: translateY(0);
  pointer-events: auto;
}

input {
  width: 280px;
  padding: 0.8rem 1.2rem;
  border-radius: 30px;
  border: none;
  outline: none;
  font-size: 1rem;
}

button {
  margin-top: 1.2rem;
  background: #38bdf8;
  color: #020617;
  border: none;
  padding: 0.6rem 1.8rem;
  border-radius: 30px;
  font-size: 1rem;
  cursor: pointer;
}

button:hover {
  background: #0ea5e9;
}
</style>
</head>

<body>

<div class="wrapper">
  <h1>Where do you want to go?</h1>
  <p>Click the globe and start your journey</p>

  <div id="globeContainer"></div>

  <div class="search-box" id="searchBox">
    <input id="destination" placeholder="Search destination (e.g. Goa)" />
    <button onclick="search()">Show Itinerary</button>
  </div>
</div>

<script>
/* ================== THREE.JS GLOBE ================== */
const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(
  45,
  1,
  0.1,
  1000
);
camera.position.z = 14;

const renderer = new THREE.WebGLRenderer({
  antialias: true,
  alpha: true
});
renderer.setSize(320, 320);
renderer.setPixelRatio(window.devicePixelRatio);

document
  .getElementById("globeContainer")
  .appendChild(renderer.domElement);

const geometry = new THREE.SphereGeometry(5, 64, 64);
const texture = new THREE.TextureLoader().load(
  "https://threejs.org/examples/textures/land_ocean_ice_cloud_2048.jpg"
);

const material = new THREE.MeshStandardMaterial({
  map: texture,
  roughness: 0.35,
  metalness: 0.05
});

const globe = new THREE.Mesh(geometry, material);
scene.add(globe);

const light = new THREE.PointLight(0xffffff, 1.5);
light.position.set(10, 10, 10);
scene.add(light);

const ambient = new THREE.AmbientLight(0xffffff, 0.6);
scene.add(ambient);

let rotating = true;

function animate() {
  requestAnimationFrame(animate);
  if (rotating) globe.rotation.y += 0.003;
  renderer.render(scene, camera);
}
animate();

/* ================== INTERACTION ================== */
document
  .getElementById("globeContainer")
  .addEventListener("click", () => {
    rotating = true;
    document
      .getElementById("searchBox")
      .classList.add("active");
  });

/* ================== SEARCH ROUTING ================== */
function search() {
  const val = document
    .getElementById("destination")
    .value.trim()
    .toLowerCase();

  if (!val) {
    alert("Please enter a destination");
    return;
  }

  const routes = {
    goa: "itineraries/goa.html",
    rajasthan: "itineraries/rajasthan.html",
    kerala: "itineraries/kerala.html",
    himachal: "itineraries/himachal.html",
    varanasi: "itineraries/varanasi.html"
  };

  if (!routes[val]) {
    alert("Itinerary not available yet");
    return;
  }

  window.location.href = routes[val];
}
</script>

</body>
</html>
